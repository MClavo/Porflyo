plugins { id 'porflyo.lambda-handler' }

micronaut {
    nativeLambda {
        lambdaRuntimeClassName = "com.porflyo.MetricsNativeEntrypoint"
    }
}

dependencies{
    implementation("io.micronaut:micronaut-http-client")
    implementation("io.micronaut.serde:micronaut-serde-jackson")
    implementation("io.micronaut.validation:micronaut-validation")
    testImplementation project(':shared:application').sourceSets.test.output
}

application {
    mainClass = 'com.porflyo.MetricsNativeEntrypoint'
}

graalvmNative {
  binaries {
    main {
      buildArgs.addAll([
        "-Ob",
      ])
    }
  }
}